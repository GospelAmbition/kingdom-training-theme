import{j as s}from"./vendor-query-sc-3RV5c.js";import{r as n}from"./vendor-react-BsyC4uYt.js";import{g as m}from"./auth-BiqxfGvi.js";import{u as p}from"./main-Cm2q55zG.js";import{d as f}from"./vendor-ui-BIzQpSM7.js";function x({postId:r}){const{t:o}=p(),[i,l]=n.useState(null),[d,c]=n.useState(!0);if(n.useEffect(()=>{console.log("AdminEditLink - Component mounted, postId:",r);async function e(){try{const t=await m();l(t),t?(console.log("AdminEditLink - User:",t),console.log("AdminEditLink - Roles:",t.roles),console.log("AdminEditLink - Capabilities:",t.capabilities)):console.log("AdminEditLink - No user returned from getCurrentUser()")}catch(t){console.error("AdminEditLink - Error fetching user:",t),l(null)}finally{c(!1)}}e()},[r]),d||!i||!(()=>{if(i.roles&&Array.isArray(i.roles)&&(i.roles.includes("administrator")||i.roles.includes("editor")))return console.log("AdminEditLink - User has editor/administrator role"),!0;if(!i.capabilities)return console.log("AdminEditLink - No capabilities found"),!1;if(Array.isArray(i.capabilities)){const e=i.capabilities.includes("edit_posts")||i.capabilities.includes("edit_others_posts")||i.capabilities.includes("administrator");return console.log("AdminEditLink - Array capabilities check:",e),e}else if(typeof i.capabilities=="object"&&i.capabilities!==null){const e=i.capabilities,t=e.edit_posts===!0||e.edit_others_posts===!0||e.administrator===!0||e.edit_posts===1||e.edit_others_posts===1||e.administrator===1||e.edit_posts==="1"||e.edit_others_posts==="1"||e.administrator==="1"||e.level_10===!0||e.level_10===1||e.level_10==="1"||Object.keys(e).some(a=>a==="administrator"||a==="editor"||a.startsWith("edit_")&&e[a]);return console.log("AdminEditLink - Object capabilities check:",t,"Keys:",Object.keys(e)),t}return console.log("AdminEditLink - Capabilities format not recognized"),!1})())return null;const u=`/wp-admin/post.php?post=${r}&action=edit`;return s.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"fixed top-20 right-4 z-50 p-2 bg-white rounded-full shadow-lg hover:shadow-xl transition-shadow duration-200 border border-gray-200 hover:border-primary-500 group",title:o("admin_edit_link_title"),"aria-label":o("admin_edit_link_aria_label"),children:s.jsx(f,{className:"w-5 h-5 text-gray-600 group-hover:text-primary-500 transition-colors duration-200"})})}function A({src:r,alt:o}){return s.jsxs("div",{className:"w-full h-48 md:h-96 bg-gray-200 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 w-full h-full",style:{backgroundImage:`url(${r})`,backgroundSize:"cover",backgroundPosition:"center",filter:"blur(20px)",transform:"scale(1.1)"},"aria-hidden":"true"}),s.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:s.jsx("img",{src:r,alt:o,loading:"eager",decoding:"async",fetchPriority:"high",className:"max-w-full max-h-full object-contain"})})]})}export{x as A,A as F};
