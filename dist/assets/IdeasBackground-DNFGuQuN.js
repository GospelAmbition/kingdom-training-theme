var P=Object.defineProperty;var z=(r,s,t)=>s in r?P(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t;var n=(r,s,t)=>z(r,typeof s!="symbol"?s+"":s,t);import{j as g}from"./vendor-query-sc-3RV5c.js";import{r as d}from"./vendor-react-BsyC4uYt.js";const C=[{type:"standard",color:"color-1"},{type:"tall",color:"color-2"},{type:"wide",color:"color-3"},{type:"standard",color:"color-1"},{type:"thin",color:"color-2"},{type:"tall",color:"color-3"},{type:"standard",color:"color-1"},{type:"wide",color:"color-2"}];class M{constructor(s,t,o){n(this,"element");n(this,"x");n(this,"y");n(this,"vx");n(this,"vy");n(this,"size");n(this,"lifetime");n(this,"age");n(this,"delay");n(this,"delayed");n(this,"opacity");n(this,"blur");n(this,"colorClass");this.element=document.createElement("div"),this.element.className="spark";const l=["color-1","color-2","color-3","color-4","color-5"];this.colorClass=l[Math.floor(Math.random()*l.length)],this.element.classList.add(this.colorClass);const h=window.innerWidth*.2,m=window.innerWidth*.8;if(this.x=h+Math.random()*(m-h),o!==void 0?this.y=o:this.y=window.innerHeight*.7+Math.random()*(window.innerHeight*.25),this.vx=(Math.random()-.5)*.8,this.vy=-2-Math.random()*2,this.size=2+Math.random()*3,this.element.style.width=`${this.size}px`,this.element.style.height=`${this.size}px`,this.lifetime=3e3+Math.random()*4e3,this.age=t!==void 0?t:0,this.delay=0,this.delayed=!0,this.opacity=0,this.blur=0,t!==void 0&&t>0){const c=this.age/this.lifetime,w=(window.innerHeight-this.y)/window.innerHeight;c<.1?this.opacity=c/.1:c>.8?this.opacity=(1-c)/.2:this.opacity=.6+Math.sin(c*Math.PI*4)*.2,this.blur=w*1.5;const p=.7+Math.sin(this.age/500)*.3,y=this.opacity*p*.6;this.blur>.5?this.element.style.filter=`blur(${this.blur}px)`:this.element.style.filter="none",this.element.style.opacity=y.toString(),this.element.style.transform="translateZ(0)"}this.updatePosition(),s.appendChild(this.element)}updatePosition(){this.element.style.left=`${this.x}px`,this.element.style.top=`${this.y}px`}update(s){if(!this.delayed){if(this.delay-=s,this.delay>0)return this.element.style.opacity="0",!0;this.delayed=!0}this.age+=s,this.x+=this.vx,this.y+=this.vy,this.vx+=(Math.random()-.5)*.1,this.vy+=(Math.random()-.5)*.05,this.vx*=.99,this.vy*=.995;const t=this.age/this.lifetime,o=(window.innerHeight-this.y)/window.innerHeight;t<.1?this.opacity=t/.1:t>.8?this.opacity=(1-t)/.2:this.opacity=.6+Math.sin(t*Math.PI*4)*.2,this.blur=o*1.5;const l=.7+Math.sin(this.age/500)*.3,h=this.opacity*l*.6;return this.blur>.5?this.element.style.filter=`blur(${this.blur}px)`:this.element.style.filter="none",this.element.style.opacity=h.toString(),this.element.style.transform="translateZ(0)",this.updatePosition(),this.age>=this.lifetime||this.y<-50||this.x<-50||this.x>window.innerWidth+50?(this.element.remove(),!1):!0}}function j(){const r=d.useRef(null),s=d.useRef(null),t=d.useRef([]),o=d.useRef(),l=d.useRef(performance.now()),h=d.useRef(0),m=500,c=50;return d.useEffect(()=>{r.current&&C.forEach(i=>{const a=document.createElement("div");a.className=`book ${i.type} ${i.color}`,r.current.appendChild(a)});function w(){if(!s.current)return;const i=Math.min(m,2e3);for(let a=0;a<i;a++){const e=new M(s.current);e.delayed=!0,e.delay=0;const v=5e3;e.age=Math.random()*v;const x=50,f=e.age/x;for(let b=0;b<x;b++)e.x+=e.vx*(f/16.67),e.y+=e.vy*(f/16.67),e.vx*=.99,e.vy*=.995,e.vx+=(Math.random()-.5)*.1*(f/16.67),e.vy+=(Math.random()-.5)*.05*(f/16.67);const u=e.age/e.lifetime,k=(window.innerHeight-e.y)/window.innerHeight;u<.1?e.opacity=u/.1:u>.8?e.opacity=(1-u)/.2:e.opacity=.6+Math.sin(u*Math.PI*4)*.2,e.blur=k*1.5;const R=.7+Math.sin(e.age/500)*.3,E=e.opacity*R*.6;e.blur>.5?e.element.style.filter=`blur(${e.blur}px)`:e.element.style.filter="none",e.element.style.opacity=E.toString(),e.element.style.transform="translateZ(0)",e.updatePosition(),t.current.push(e)}}w();function p(i){const a=i-l.current;if(l.current=i,s.current&&i-h.current>=c){if(t.current.length<m){const e=new M(s.current);t.current.push(e)}h.current=i}for(let e=t.current.length-1;e>=0;e--)t.current[e].update(a)||t.current.splice(e,1);o.current=requestAnimationFrame(p)}o.current=requestAnimationFrame(p);function y(){t.current.forEach((i,a)=>{(i.x<-100||i.x>window.innerWidth+100)&&(i.element.remove(),t.current.splice(a,1))})}return window.addEventListener("resize",y),()=>{o.current&&cancelAnimationFrame(o.current),window.removeEventListener("resize",y),t.current.forEach(i=>i.element.remove()),t.current=[]}},[]),g.jsxs("div",{className:"ideas-background absolute inset-0 overflow-hidden pointer-events-none z-0",children:[g.jsx("div",{ref:r,className:"books-container"}),g.jsx("div",{ref:s,className:"sparks-container"})]})}export{j as default};
