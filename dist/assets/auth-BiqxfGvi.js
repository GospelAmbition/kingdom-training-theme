const a=()=>typeof window<"u"?"/wp-json":"http://localhost:8888/wp-json",r=a();async function s(e,n){const t=await fetch(`${r}/gaal/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({username:e,password:n})});if(!t.ok){const o=await t.json().catch(()=>({message:"Login failed"}));throw new Error(o.message||"Invalid username or password")}return await t.json()}async function l(){if(!(await fetch(`${r}/gaal/v1/auth/logout`,{method:"POST",credentials:"include"})).ok)throw new Error("Logout failed")}async function u(){try{const e=await fetch(`${r}/gaal/v1/auth/me`,{method:"GET",credentials:"include",headers:{"Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"}});if(e.status===200){const n=await e.text();if(!n||n.trim()===""||n.trim()==="null")return null;try{const t=JSON.parse(n);return!t||t===null||typeof t=="object"&&Object.keys(t).length===0?null:t}catch{return null}}return e.status===401||e.status===403,null}catch(e){return console.error("Error fetching current user:",e),null}}export{l as a,u as g,s as l};
